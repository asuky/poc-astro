# WordPress Docker イメージの変更（FPM から Apache へ）

## 日付
2026年1月8日

## 対応内容

### 要望
- 現状 FPM 版の WordPress イメージを使用しているが、nginx を使う必要がないため Apache 同梱版に変更したい
- WordPress と PHP のバージョンを維持しつつ Apache イメージを使用
- wp-cli も引き続き使えるようにする

### 実施内容

#### docker/Dockerfile_wp の変更
**変更前:**
```dockerfile
FROM wordpress:6.9.0-php8.2-fpm-alpine
```

**変更後:**
```dockerfile
FROM wordpress:6.9.0-php8.2-apache
```

#### その他の変更点
1. **Alpine Linux 固有コマンドの削除**
   - `apk update && apk add shadow` を削除（Debian ベースのため不要）

2. **RUN コマンドの統合**
   - Docker レイヤー数を削減するため、複数の RUN コマンドを統合して最適化

3. **不要な設定の削除**
   - `-d /var/www/html -s /bin/ash` オプションを削除（デフォルトで適切に設定される）
   - `error-logging.ini` の削除処理を削除

4. **wp-cli の保持**
   - wp-cli のインストール設定は引き続き維持
   - alias 設定も保持

### 使用イメージ
- **ベースイメージ**: `wordpress:6.9.0-php8.2-apache`
- **WordPress バージョン**: 6.9.0
- **PHP バージョン**: 8.2
- **Web サーバ**: Apache（同梱）

### メリット
- nginx の設定が不要になりシンプルな構成に
- Apache が同梱されているため、別途 Web サーバコンテナを立てる必要がない
- WordPress の公式イメージの標準的な使い方に準拠
